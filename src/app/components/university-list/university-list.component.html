<!-- Main container -->
<div class="university-list-container">
  <!-- Header -->
  <div class="header">
    <h1>ëŒ€í•™êµ íƒìƒ‰í•˜ê¸°</h1>
    <p class="subtitle">í•œêµ­ì˜ ìµœê³  ëŒ€í•™êµë¥¼ ì°¾ì•„ë³´ì„¸ìš”</p>
  </div>

  <!-- Search and filter section -->
  <div class="search-filter-section">
    <div class="search-box">
      <input
        class="search-input"
        type="text"
        placeholder="ëŒ€í•™êµ ì´ë¦„ ê²€ìƒ‰..."
        [(ngModel)]="searchQuery"
        (input)="filterUniversities()"
      >
      <span class="search-icon">ğŸ”</span>
    </div>

    <div class="filter-container">
      <div class="filter-item">
        <label for="location-filter">ìœ„ì¹˜</label>
        <select
          id="location-filter"
          class="filter-select"
          [(ngModel)]="selectedLocation"
          (change)="filterUniversities()"
        >
          <option value="">ëª¨ë“  ì§€ì—­</option>
          <option *ngFor="let location of locations" [value]="location">{{ location }}</option>
        </select>
      </div>

      <div class="filter-item">
        <label for="type-filter">ì¢…ë¥˜</label>
        <select
          id="type-filter"
          class="filter-select"
          [(ngModel)]="selectedType"
          (change)="filterUniversities()"
        >
          <option value="">ëª¨ë“  ì¢…ë¥˜</option>
          <option *ngFor="let type of universityTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <button
        *ngIf="searchQuery || selectedLocation || selectedType"
        class="reset-filters-btn"
        (click)="resetFilters()"
      >
        í•„í„° ì´ˆê¸°í™”
      </button>
    </div>
  </div>

  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>ëŒ€í•™êµ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="errorMessage && !loading" class="error-message">
    <span class="error-icon">âš ï¸</span>
    <p>{{ errorMessage }}</p>
    <button class="retry-btn" (click)="loadUniversities()">ë‹¤ì‹œ ì‹œë„</button>
  </div>

  <!-- No results -->
  <div *ngIf="!loading && !errorMessage && universities.length === 0" class="no-results">
    <span class="no-results-icon">ğŸ”</span>
    <h3>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
    <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ ë˜ëŠ” í•„í„°ë¥¼ ì‚¬ìš©í•´ ë³´ì„¸ìš”.</p>
  </div>

  <!-- University list without pagination -->
  <div *ngIf="!loading && !errorMessage && universities.length > 0">
    <!-- Sort controls -->
    <div class="sort-container">
      <div class="sort-controls">
        <span class="sort-label">ì •ë ¬:</span>
        <button
          class="sort-btn"
          [class.active]="sortBy === 'name'"
          (click)="sortUniversities('name')"
        >
          ì´ë¦„
        </button>
        <button
          class="sort-btn"
          [class.active]="sortBy === 'ranking'"
          (click)="sortUniversities('ranking')"
        >
          ìˆœìœ„
        </button>
        <button
          class="sort-btn"
          [class.active]="sortBy === 'rating'"
          (click)="sortUniversities('rating')"
        >
          í‰ì 
        </button>
        <button
          class="sort-direction-btn"
          (click)="toggleSortDirection()"
        >
          {{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }}
        </button>
      </div>
      <div class="results-count">
        <span>{{ universities.length }}</span> ëŒ€í•™êµ ì°¾ìŒ
      </div>
    </div>

    <!-- Universities grid -->
    <div class="universities-grid">
      <div
        *ngFor="let university of universities"
        class="university-card"
        (click)="navigateToDetail(university.id)"
      >
        <div class="card-image-container">
          <div *ngIf="getUniversityImageUrl(university); else universityPlaceholder" class="university-image-container">
            <img
              class="university-image"
              [src]="getUniversityImageUrl(university)"
              [alt]="university.name + ' ì´ë¯¸ì§€'"
            >
          </div>
          <ng-template #universityPlaceholder>
            <div class="university-placeholder">
              {{ university.name.charAt(0) }}
            </div>
          </ng-template>
          <div *ngIf="university.ranking" class="ranking-badge">
            ìˆœìœ„ #{{ university.ranking }}
          </div>
        </div>
        <div class="card-content">
          <h3 class="university-name" [title]="university.name">{{ formatUniversityName(university.name) }}</h3>
          <p *ngIf="university.nameKorean" class="university-korean-name"
             [title]="university.nameKorean">{{ university.nameKorean }}</p>
          <div class="university-info">
            <p *ngIf="university.location" [title]="university.location">
              <span class="info-icon">ğŸ“</span>
              {{ university.location }}
            </p>
            <p *ngIf="university.type" [title]="university.type">
              <span class="info-icon">ğŸ›ï¸</span>
              {{ university.type }}
            </p>
            <p *ngIf="university.established" [title]="university.established + ' ì„¤ë¦½'">
              <span class="info-icon">ğŸ“…</span>
              {{ university.established }} ì„¤ë¦½
            </p>
          </div>

          <div *ngIf="university.averageRating" class="rating-container">
            <div class="stars">
              <span *ngFor="let star of getStars(university.averageRating)"
                    [class.filled]="star === 'full'"
                    [class.half-filled]="star === 'half'"
                    class="star">â˜…</span>
            </div>
            <span class="rating-value">{{ university.averageRating | number:'1.1-1' }}</span>
            <span *ngIf="university.reviewCount" class="review-count">
              ({{ university.reviewCount }} ë¦¬ë·°)
            </span>
          </div>

          <p *ngIf="university.description" class="university-description" [title]="university.description">
            {{ truncateDescription(university.description, 75) }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
